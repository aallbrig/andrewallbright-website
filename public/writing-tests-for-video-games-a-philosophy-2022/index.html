<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://andrewallbright.com/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://andrewallbright.com/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://andrewallbright.com/css/github.min.css' />
    <link rel="stylesheet" href='https://andrewallbright.com/css/github-style.css' />
    <link rel="stylesheet" href='https://andrewallbright.com/css/light.css' />
    <link rel="stylesheet" href='https://andrewallbright.com/css/dark.css' />
    <link rel="stylesheet" href='https://andrewallbright.com/css/syntax.css' />
    <title>Writing Tests for Video Games: A Philosophy (2022) - Andrew Allbright</title>
    
    <link rel="icon" type="image/x-icon" href='https://andrewallbright.com/images/favicon.ico'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="I mean to capture my current early 2022 thoughts on writing tests intended to be run by automated processes created for Unity based video games. I want to capture my thoughts so I can share this and receive feedback. I know I haven’t found a holistic philosophy around testing. I know I can be better. If you can help, please do!
Pit stop: Where is all the content? I love researching topics, buying books, and seeing what content “influencers” say on topics. When I investigate this topic I find very little content. Are content creators disinterested in this topic? The ones that do create content seem to be stuck showing testing setup and trivial examples, such as testing a function that adds two numbers. I’m sure there is a deep dive out there but I can’t seem to find it.
" />
<meta name="keywords"
  content='' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://andrewallbright.com/writing-tests-for-video-games-a-philosophy-2022/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Writing Tests for Video Games: A Philosophy (2022) - Andrew Allbright" />
<meta name="twitter:description"
  content="I mean to capture my current early 2022 thoughts on writing tests intended to be run by automated processes created for Unity based video games. I want to capture my thoughts so I can share this and receive feedback. I know I haven’t found a holistic philosophy around testing. I know I can be better. If you can help, please do!
Pit stop: Where is all the content? I love researching topics, buying books, and seeing what content “influencers” say on topics. When I investigate this topic I find very little content. Are content creators disinterested in this topic? The ones that do create content seem to be stuck showing testing setup and trivial examples, such as testing a function that adds two numbers. I’m sure there is a deep dive out there but I can’t seem to find it.
" />
<meta name="twitter:site" content="https://andrewallbright.com/" />
<meta name="twitter:creator" content="Andrew Allbright" />
<meta name="twitter:image"
  content="https://andrewallbright.com/">


<meta property="og:type" content="article" />
<meta property="og:title" content="Writing Tests for Video Games: A Philosophy (2022) - Andrew Allbright">
<meta property="og:description"
  content="I mean to capture my current early 2022 thoughts on writing tests intended to be run by automated processes created for Unity based video games. I want to capture my thoughts so I can share this and receive feedback. I know I haven’t found a holistic philosophy around testing. I know I can be better. If you can help, please do!
Pit stop: Where is all the content? I love researching topics, buying books, and seeing what content “influencers” say on topics. When I investigate this topic I find very little content. Are content creators disinterested in this topic? The ones that do create content seem to be stuck showing testing setup and trivial examples, such as testing a function that adds two numbers. I’m sure there is a deep dive out there but I can’t seem to find it.
" />
<meta property="og:url" content="https://andrewallbright.com/writing-tests-for-video-games-a-philosophy-2022/" />
<meta property="og:site_name" content="Writing Tests for Video Games: A Philosophy (2022)" />
<meta property="og:image"
  content="https://andrewallbright.com/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2022-02-19 16:30:40 &#43;0000 UTC" />













</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://andrewallbright.com/">
        <img class="octicon" height="32" width="32" src="">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://andrewallbright.com/">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://andrewallbright.com/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://andrewallbright.com/">
                  <img class=" avatar-user"
                    src="https://andrewallbright.com/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://andrewallbright.com/">Andrew Allbright</a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="https://andrewallbright.com/writing-tests-for-video-games-a-philosophy-2022/">Writing Tests for Video Games: A Philosophy (2022)</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Sat, 19 Feb 2022 16:30:40 &#43;0000"
                    class="no-wrap">
                    Sat, 19 Feb 2022 16:30:40 &#43;0000</relative-time>

                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      875 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><p>I mean to capture my current early 2022 thoughts on writing tests intended to be run by <!-- raw HTML omitted -->automated processes<!-- raw HTML omitted --> created for Unity based video games. I want to capture my thoughts so I can share this and receive feedback. I <em>know</em> I haven’t found a holistic philosophy around testing. I <em>know</em> I can be better. If you can help, please do!</p>
<h3 id="pit-stop-where-is-all-the-content.wp-block-heading">Pit stop: Where is all the content?</h3>
<p>I love researching topics, buying books, and seeing what content “influencers” say on topics. When I investigate this topic I find very little content. Are content creators disinterested in this topic? The ones that do create content seem to be stuck showing testing setup and trivial examples, such as testing a function that adds two numbers. I’m sure there is a deep dive out there but I can’t seem to find it.</p>
<p>There is hope. Someone shared this high quality Unity talk where they discuss how they structured their code to support testing, and why that’s important.<!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p>My conclusion is that testing is just a subject that requires more thought and consideration from the community.</p>
<p>With the help of books like <strong><!-- raw HTML omitted -->Unit Testing: Principles, Practices, and Patterns<!-- raw HTML omitted --></strong>, <strong><!-- raw HTML omitted -->Growing Object Oriented Software Guided by Tests<!-- raw HTML omitted --></strong>, and <strong><!-- raw HTML omitted -->Dependency Injection: Principles, Practices, and Patterns<!-- raw HTML omitted --></strong> I have synthesized my own nascent testing philosophy for unity.</p>
<h3 id="does-it-even-make-sense-to-write-tests-for-video-games.wp-block-heading">Does it even make sense to write tests for video games?</h3>
<p>For me the answer is “yes.” I typically share this short blog from an EA employee: <!-- raw HTML omitted -->3 Lines of Code Shouldn’t Take All Day<!-- raw HTML omitted --></p>
<p>The answer for you may be “no” and I think that’s just fine. I truly see merits in the styles of thinking that lead to “yes” and that lead to “no.” I think both answers stem from valid worldviews.</p>
<p>Do. What. Works. For. You.</p>
<h2 id="types-of-testing.wp-block-heading">Types of Testing</h2>
<p>In Unity there are <em>many</em> types of code one can write. Right now I simplify by declaring four types of code. Attachable components derive from the familiar <strong><!-- raw HTML omitted -->MonoBehaviour<!-- raw HTML omitted --></strong> (MB). Custom project assets are defined by **<!-- raw HTML omitted -->ScriptableObject<!-- raw HTML omitted -->**s (SO) and typically work in tandem with MBs. Editor scripts derive from <!-- raw HTML omitted -->Editor<!-- raw HTML omitted -->. The humble <strong>vanilla C# code</strong> serve as a way of modeling a solution space outside of the Unity game engine.</p>
<p>The <!-- raw HTML omitted -->Unity Test Framework<!-- raw HTML omitted --> affords a matrix of four types of test suites. First, one must decide if a test is an <strong>Edit Mode</strong> test or a <strong>Play Mode</strong> test. Afterwards, one must decide if the test they are writing requires an asynchronous execution context (<code>[UnityTest]</code>) or a synchronous one (<code>[Test]</code>). <em>Note: the unity test framework 2.0 consolidates Edit Mode and Play Mode testing and leverages attributes instead to make the same types of declaration as above.</em></p>
<!-- raw HTML omitted -->
<h3 id="unit-tests.wp-block-heading">Unit Tests</h3>
<p>Vanilla C# code gets to leverage edit mode tests. A tester has full control over the construction and function calls.</p>
<p><strong>Editor</strong> tests are tests that require the <code>[UnityTest]</code> attribute but can still be run as an Edit Mode test. I honestly haven’t written enough editor scripts to have an example test for them.</p>
<p>I have learned not to fight and to just add <strong>MonoBehaviour</strong> and <strong>ScriptableObject</strong> as Play Mode tests. This allows the Unity engine to call all relevant lifecycle methods. You can do this yourself by making <code>private</code> methods into <code>public</code> ones but… Been there, there be dragons, and no thanks.</p>
<p>Another “gotcha” that I learned to appreciate is the <strong><!-- raw HTML omitted -->Order of Execution<!-- raw HTML omitted --></strong> for the unity class lifecycle methods. Basically, if you want to ensure your <code>Awake</code> or <code>Start</code> methods are called, you need to wait a frame. I usually <code>yield return null</code> or <code>yield return new WaitForEndOfFrame()</code> to wait a frame.</p>
<p>Anyways, since this is a unit test I usually create a <code>new GameObject</code> and <code>AddComponent</code> to add the MB I want to test. I save the conceptualization of a Game Object as a means of dependency injection and service locator for another time.</p>
<p>Here is an example ScriptableObject test.</p>
<h3 id="integration-tests.wp-block-heading">Integration Tests</h3>
<p>This is where I think I have some interesting insight. I think prefabs serve as a perfect unit for integration testing. I like to instantiate an instance of a prefab and write tests against prefabs that describe higher level behavior. For example, here is a test where I assert that this “player” prefab can be moved by input from the new unity input system.</p>
<p>At this time, I have not written a unity project that collaborates with external systems. When I do I plan on using abstract interface techniques to hide the collaboration with the external system in a way that I can mock out that collaboration. To avoid a leaky layer of abstraction I will return my own domain objects instead of responses directly from whatever system I am collaborating with.</p>
<h3 id="acceptance-testing.wp-block-heading">Acceptance Testing</h3>
<p>Unity Scenes serve as the level I want to write tests. Right now I typically ensure expected game objects exist within the scene and hope that the lower level tests have ensured a certain behavior of game entities.</p>
<h2 id="conclusion.wp-block-heading">Conclusion</h2>
<p>I’m still figuring it out. I’m sure the type of content I hope for is it out. However; I’m perfectly okay figuring out my own strategy. If you have any input or suggestions, I would appreciate receiving feedback. Thank you in advance!</p>
<p>I hope some found this content interesting.</p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://andrewallbright.com/js/toc.js'></script>
<link rel="stylesheet" href='https://andrewallbright.com/css/toc.css' />

  
</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://andrewallbright.com/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://andrewallbright.com/js/github-style.js"></script>







</html>